(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"184d":function(e,n,t){},3634:function(e,n,t){"use strict";t.r(n);var s=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("q-page",{staticClass:"row items-center justify-center"},[t("div",{staticClass:"row q-pt-md q-pl-md text-weight-light"},[e.cashloading?t("q-spinner",{attrs:{color:"dark",size:"3em",thickness:2}}):e._e(),e._l(e.cashdesks,(function(n,s){return t("q-card",{key:s,staticClass:"q-mr-md q-mb-md",attrs:{flat:"",bordered:""}},[t("q-card-section",{attrs:{horizontal:""}},[t("q-card-section",{staticClass:"column justify-center"},[t("div",{staticClass:"text-h6"},[e._v("Caja "+e._s(n.id))]),t("div",[e._v(e._s(e.cashstates[n._state]))])]),t("q-separator",{attrs:{vertical:""}}),t("q-card-actions",{staticClass:"justify-around q-px-md",attrs:{vertical:""}},[n._state<3?[t("q-btn",{attrs:{flat:"",round:"",color:"primary",icon:"far fa-play-circle"},on:{click:function(n){return e.initOpening(s)}}})]:e._e(),3==n._state?[t("q-btn",{attrs:{flat:"",round:"",color:"red",icon:"fas fa-cut"}})]:e._e()],2)],1)],1)}))],2),t("q-dialog",{model:{value:e.wndOpening.state,callback:function(n){e.$set(e.wndOpening,"state",n)},expression:"wndOpening.state"}},[t("q-card",[t("q-toolbar",{staticClass:"bg-white text-dark"},[t("q-toolbar-title",[t("span",{staticClass:"text-weight-light"},[e._v(" Apertura de Caja ")])])],1),t("q-card-section",[t("div",{staticClass:"row"},[t("q-markup-table",{attrs:{flat:""}},e._l(e.bills,(function(n,s){return t("tr",{key:s+"_bill",staticClass:"text-indigo-5"},[t("td",[t("q-input",{attrs:{color:"dark",type:"number",min:"0","stack-label":"",label:"$ "+String(n.value)},model:{value:n.model,callback:function(t){e.$set(n,"model",t)},expression:"bill.model"}})],1)])})),0),t("q-markup-table",{attrs:{flat:""}},e._l(e.coins,(function(n,s){return t("tr",{key:s+"_coin"},[t("td",[t("q-input",{attrs:{color:"dark",type:"number",min:"0","stack-label":"",label:"$ "+String(n.value)},model:{value:n.model,callback:function(t){e.$set(n,"model",t)},expression:"coin.model"}})],1)])})),0)],1)]),e.totalCurrs?t("q-card-actions",{attrs:{align:"center"}},[t("q-btn",{attrs:{color:"dark",loading:e.wndOpening.opening},on:{click:e.makeOpening}},[e._v("Iniciar con $"+e._s(e.totalCurrs))])],1):e._e()],1)],1)],1)},a=[],i=t("c973"),o=t.n(i),l=t("5671"),r={index(e){return console.log("%cIndexando Cajas...","font-size:2em; color:gold;"),console.log(e),l["a"].post("cashdesk/index",e).then(e=>(console.log(e),e.data)).catch(e=>{console.log(e)})},newOpening(e){return console.log("%Apertudando Caja...","font-size:2em; color:gold;"),console.log(e),l["a"].post("cashdesk/opening",e)}},c={data(){return{cashloading:!0,cashdesks:[],wndOpening:{state:!1,denoms:null,cash:null,opening:!1},cashstates:{1:"Nueva/disponible para apertura",2:"Disponible para apertura",3:"En uso (cobrando)"}}},beforeMount(){this.index()},methods:{index(){var e=this;return o()((function*(){let n=yield r.index({apikey:e.apikey});e.cashdesks=n.cashdesks,e.wndOpening.denoms=n.currencies.map(e=>(e.model=0,e)),e.cashloading=!1,console.log(e.cashdesks)}))()},initOpening(e){this.wndOpening.cash=this.cashdesks[e],this.wndOpening.state=!0,console.log(this.wndOpening)},resetwndOpening(){this.wndOpening.cash=null,this.wndOpening.state=!1,this.wndOpening.opening=!1,this.wndOpening.denoms=idx.currencies.map(e=>(e.model=0,e))},makeOpening(){console.log("staritng opening");let e=this.wndOpening.denoms.map(e=>({id:e.id,cant:parseInt(e.model)}));console.log(this.wndOpening.cash.id);let n={apikey:this.apikey,cashdesk:{id:this.wndOpening.cash.id,denoms:e,assignto:3,notes:""}};this.wndOpening.opening=!0,r.newOpening(n).then(e=>{let n=e.data;if(console.log(n),n){this.wndOpening.state=!1;let e=this.cashdesks.findIndex(e=>e.id==this.wndOpening.cash.id);this.cashdesks[e]._state=3,this.$q.notify({color:"positive",message:`Listo!! (${n.rset.openid})`,icon:"done"}),this.resetwndOpening()}}).catch(e=>{console.log(e)})}},computed:{apikey(){return this.$store.state.account.apikey},bills(){if(this.wndOpening.denoms)return this.wndOpening.denoms.filter(e=>1==e.type)},coins(){if(this.wndOpening.denoms)return this.wndOpening.denoms.filter(e=>2==e.type)},totalCurrs(){if(this.wndOpening.denoms){let e=this.coins.map(e=>e.value*e.model).reduce((e,n)=>e+n)+this.bills.map(e=>e.value*e.model).reduce((e,n)=>e+n);return console.log(e),e}return 0}}},d=c,p=(t("935e"),t("2877")),u=t("9989"),g=t("0d59"),h=t("f09f"),m=t("a370"),f=t("eb85"),k=t("4b7e"),w=t("9c40"),b=t("24e8"),O=t("65c6"),q=t("6ac5"),v=t("2bb1"),_=t("27f9"),y=t("eebe"),C=t.n(y),x=Object(p["a"])(d,s,a,!1,null,null,null);n["default"]=x.exports;C()(x,"components",{QPage:u["a"],QSpinner:g["a"],QCard:h["a"],QCardSection:m["a"],QSeparator:f["a"],QCardActions:k["a"],QBtn:w["a"],QDialog:b["a"],QToolbar:O["a"],QToolbarTitle:q["a"],QMarkupTable:v["a"],QInput:_["a"]})},"935e":function(e,n,t){"use strict";var s=t("184d"),a=t.n(s);a.a}}]);