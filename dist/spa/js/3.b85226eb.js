(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{b93d:function(t,e,a){},d5d6:function(t,e,a){"use strict";var s=a("b93d"),l=a.n(s);l.a},d770:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{attrs:{view:"hHh Lpr fFf"}},[a("q-header",{staticClass:"bg-white text-dark"},[a("q-toolbar",[a("q-toolbar-title",{staticClass:"text-center"},[a("span",{staticClass:"text-weight-light"},[t._v(" Estacionamiento ")])])],1)],1),a("q-footer",{staticClass:"bg-white text-dark"},[a("q-toolbar",[a("q-toolbar-title",{staticClass:"text-center"},[a("span",{staticClass:"text-weight-light"},[t._v(" Grupo Vizcarra ")])])],1)],1),a("q-drawer",{attrs:{side:"left",bordered:"","content-class":"bg-grey-2"},model:{value:t.leftDrawer,callback:function(e){t.leftDrawer=e},expression:"leftDrawer"}},[a("q-scroll-area",{staticClass:"fit q-pa-sm"})],1),a("q-page-container",[a("q-page",{staticClass:"column items-center justify-center"},[a("div",{staticClass:"bg-white q-pt-md q-mb-md"},[a("q-form",{on:{submit:t.defineParking}},[a("div",{staticClass:"finder row items-center q-py-md"},[a("q-icon",{staticClass:"col",attrs:{color:"dark",name:"fas fa-car",size:"30px"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.iptplate.value,expression:"iptplate.value"}],ref:"iptplate_search",staticClass:"q-px-md col-8 iptplate text-uppercase text-h3 bg-none",attrs:{color:"dark",outlined:"",type:"text",disable:t.iptplate.state,autocomplete:"off"},domProps:{value:t.iptplate.value},on:{input:function(e){e.target.composing||t.$set(t.iptplate,"value",e.target.value)}}}),a("q-btn",{staticClass:"col",attrs:{color:"dark",flat:"",type:"submit",stack:"",icon:"fas fa-magic",disable:t.iptplate.state||t.iptplate.value.length<4}})],1)])],1),a("div",{staticClass:"row q-mt-md q-pt-md q-pl-md justify-center"},t._l(t.parking,(function(e,s){return a("div",{key:s},[a("q-card",{staticClass:"q-mr-md q-mb-md",attrs:{flat:"",bordered:""}},[a("q-card-section",{attrs:{horizontal:""}},[a("q-card-section",{staticClass:"column justify-center"},[a("div",{staticClass:"text-h6"},[t._v(t._s(e.plate))]),a("div",{attrs:{clasS:"text-caption"}},[t._v(t._s(e.init))])]),a("q-separator",{attrs:{vertical:""}}),a("q-card-actions",{staticClass:"justify-around q-px-md",attrs:{vertical:""}},[1==e.parkstate?[a("q-btn",{attrs:{flat:"",round:"",color:"primary",icon:"fas fa-angle-double-up"},on:{click:function(a){return t.autoCheckPark(e.plate)}}})]:t._e(),2==e.parkstate?[a("q-btn",{attrs:{flat:"",round:"",color:"red",icon:"fas fa-cut"}})]:t._e()],2)],1)],1)],1)})),0),a("q-dialog",{on:{"before-hide":function(e){t.iptplate.value=""}},model:{value:t.wndCheckinStd.state,callback:function(e){t.$set(t.wndCheckinStd,"state",e)},expression:"wndCheckinStd.state"}},[a("q-card",[a("q-toolbar",[a("q-toolbar-title",{staticClass:"text-center"},[a("span",{staticClass:"text-weight-light text-uppercase"},[t._v(" "+t._s(t.iptplate.value)+" ")])]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{rounded:"",flat:"",color:"negative",icon:"close"}})],1),a("q-card-section",[a("q-select",{attrs:{color:"dark",options:t.tariffsdb,label:"Tarifa"},model:{value:t.usetariff,callback:function(e){t.usetariff=e},expression:"usetariff"}}),a("q-input",{attrs:{color:"dark","stack-label":"",label:"notas"},model:{value:t.notascheckinstd,callback:function(e){t.notascheckinstd=e},expression:"notascheckinstd"}})],1),a("q-card-actions",{attrs:{align:"center"}},[a("q-btn",{attrs:{outline:"",label:"Checkin"},on:{click:function(e){return t.checkInSTD()}}})],1)],1)],1),a("q-dialog",{on:{"before-hide":function(e){t.iptplate.value=""}},model:{value:t.wndPreCheckOutStd.state,callback:function(e){t.$set(t.wndPreCheckOutStd,"state",e)},expression:"wndPreCheckOutStd.state"}},[a("q-card",[a("q-toolbar",[a("q-toolbar-title",[a("span",{staticClass:"text-weight-light text-uppercase"},[t._v(" Checkout ")])]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{rounded:"",flat:"",color:"negative",icon:"close"}})],1),t.wndPreCheckOutStd.topay?a("q-card-section",{attrs:{horizontal:""}},[a("q-card-section",[a("q-markup-table",{staticClass:"text-dark",attrs:{flat:""}},[a("tbody",[a("tr",[a("td",{staticClass:"text-left"},[t._v("Placa:")]),a("td",{staticClass:"text-left"},[t._v(t._s(t.wndPreCheckOutStd.dtpark.plate))])]),a("tr",[a("td",{staticClass:"text-left"},[t._v("Inicio:")]),a("td",{staticClass:"text-left"},[t._v(t._s(t.wndPreCheckOutStd.dtpark.init))])]),a("tr",[a("td",{staticClass:"text-left"},[t._v("Salida:")]),a("td",{staticClass:"text-left"},[t._v(t._s(t.wndPreCheckOutStd.topay.time_calc))])]),a("tr",[a("td",{staticClass:"text-left"},[t._v("Tiempo Total:")]),a("td",{staticClass:"text-left"},[t._v(t._s(t.wndPreCheckOutStd.topay.hours)+" horas, "+t._s(t.wndPreCheckOutStd.topay.mints_adds)+" minutos")])]),a("tr",[a("td",{staticClass:"text-left"},[t._v("Total a pagar")]),a("td",{staticClass:"text-left"},[t._v("$ "+t._s(t.wndPreCheckOutStd.topay.totalcost))])])])])],1),a("q-card-section",[a("q-select",{attrs:{color:"dark",options:t.paywaysdb,"stack-label":"",label:"Forma de pago"},model:{value:t.usepayway,callback:function(e){t.usepayway=e},expression:"usepayway"}}),a("q-input",{attrs:{color:"dark",type:"number","stack-label":"",label:"pago"},model:{value:t.wndPreCheckOutStd.paytotal,callback:function(e){t.$set(t.wndPreCheckOutStd,"paytotal",e)},expression:"wndPreCheckOutStd.paytotal"}}),t.wndPreCheckOutStd.paytotal>=t.wndPreCheckOutStd.topay.totalcost?a("q-card-actions",{attrs:{align:"center"}},[a("q-btn",{attrs:{color:"primary","full-width":"",flat:"",label:"pagar"},on:{click:function(e){return t.makeCharge()}}})],1):t._e(),t.wndPreCheckOutStd.paytotal>=t.wndPreCheckOutStd.topay.totalcost?a("div",{staticClass:"text-center q-pa-md"},[t._v("\n\t\t\t\t\t\t\t\tCambio: "+t._s(t.wndPreCheckOutStd.paytotal-t.wndPreCheckOutStd.topay.totalcost)+"\n\t\t\t\t\t\t\t")]):t._e()],1)],1):t._e()],1)],1)],1)],1)],1)},l=[],o=(a("a434"),a("c973")),i=a.n(o),c=a("5671"),r={index(t){return console.log("%cIndexando Parking...","font-size:2em; color:gold;"),console.log(t),c["a"].post("park/index",t).then(t=>(console.log(t),t.data)).catch(t=>{console.log(t)})},magic(t){return console.log("%cBuscando...","font-size:2em; color:gold;"),console.log(t),c["a"].post("park/mginput",t)},makeCheckInStd(t){return console.log("%cHaciendo Checkin...","font-size:2em; color:gold;"),console.log(t),c["a"].post("park/stdcheckin",t)},makeCharge(t){return console.log("%cHaciendo Pago...","font-size:2em; color:gold;"),console.log(t),c["a"].post("park/charge",t)}},n={data(){return{parking:null,leftDrawer:!1,iptplate:{state:!1,value:""},wndCheckinStd:{state:!1},wndPreCheckOutStd:{state:!1,topay:null,dtpark:null,paytotal:0},tariffsdb:[{value:1,label:"Publico"},{value:1,label:"Especial"}],paywaysdb:[{value:1,label:"Efectivo"},{value:2,label:"TDC/TDD"}],usetariff:{value:1,label:"Publico"},usepayway:{value:1,label:"Efectivo"},notascheckinstd:""}},beforeMount(){this.index()},methods:{index(){var t=this;return i()((function*(){let e=yield r.index({apikey:t.apikey});console.log(e),t.parking=e.park}))()},autoCheckPark(t){this.iptplate.value=t,this.defineParking()},defineParking(){let t={apikey:this.apikey,mginput:this.iptplate.value};r.magic(t).then(t=>{let e=t.data;switch(console.log(e),e.inpark){case 404:case 205:console.log("Realizar checkin STD, continuar?"),this.wndCheckinStd.state=!0;break;case 200:console.log("Hacer checkout"),this.wndPreCheckOutStd.state=!0,this.wndPreCheckOutStd.topay=e.precheckout.topay,this.wndPreCheckOutStd.dtpark=e.precheckout.dtpark,console.log(this.wndPreCheckOutStd.topay),console.log(this.wndPreCheckOutStd.dtpark);break}}).catch(t=>{console.log(t)})},makeCharge(){let t={apikey:this.apikey,topay:{init:this.wndPreCheckOutStd.dtpark.init,plate:this.wndPreCheckOutStd.dtpark.plate,plateid:this.wndPreCheckOutStd.dtpark.plateid,idtariff:this.wndPreCheckOutStd.dtpark.idtariff,parkid:this.wndPreCheckOutStd.dtpark.parkid,idmainservice:this.wndPreCheckOutStd.dtpark.idmainservice,time_calc:this.wndPreCheckOutStd.topay.time_calc,parts:[{method:this.usepayway.value,cant:this.wndPreCheckOutStd.paytotal,notes:""}]}};r.makeCharge(t).then(t=>{let e=t.data;console.log(e),this.wndPreCheckOutStd.state=!1;let a=this.parking.findIndex(t=>t.plate==this.wndPreCheckOutStd.dtpark.plate);this.parking.splice(a,1)}).catch(t=>{console.log(t)}),console.log(t)},checkInSTD(){let t={apikey:this.apikey,plate:this.iptplate.value,tariff:this.usetariff,notes:this.notascheckinstd};r.makeCheckInStd(t).then(t=>{let e=t.data;if(console.log(e),e.data){let t={idmnservice:e.data.idmservice,idtariff:e.data.idmtariff,init:e.data.init,parkstate:1,plate:e.data.plate,plateid:e.data.idplate};console.log(t),this.parking.unshift(t),console.log(this.parking),this.$q.notify({color:"positive",message:`Checkin ${e.data.idpark} correcto!!`,icon:"done"}),this.wndCheckinStd.state=!1,this.iptplate.value=""}}).catch(t=>{console.log(t)})}},computed:{apikey(){return this.$store.state.account.apikey}}},d=n,p=(a("d5d6"),a("2877")),u=a("4d5a"),k=a("e359"),h=a("65c6"),f=a("6ac5"),C=a("7ff0"),g=a("9404"),m=a("4983"),b=a("09e3"),v=a("9989"),w=a("0378"),y=a("0016"),q=a("9c40"),S=a("f09f"),P=a("a370"),x=a("eb85"),_=a("4b7e"),O=a("24e8"),Q=a("ddd8"),T=a("27f9"),D=a("2bb1"),z=a("7f67"),I=a("eebe"),$=a.n(I),j=Object(p["a"])(d,s,l,!1,null,null,null);e["default"]=j.exports;$()(j,"components",{QLayout:u["a"],QHeader:k["a"],QToolbar:h["a"],QToolbarTitle:f["a"],QFooter:C["a"],QDrawer:g["a"],QScrollArea:m["a"],QPageContainer:b["a"],QPage:v["a"],QForm:w["a"],QIcon:y["a"],QBtn:q["a"],QCard:S["a"],QCardSection:P["a"],QSeparator:x["a"],QCardActions:_["a"],QDialog:O["a"],QSelect:Q["a"],QInput:T["a"],QMarkupTable:D["a"]}),$()(j,"directives",{ClosePopup:z["a"]})}}]);